<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KH-DONGHUA</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo-profile.jpg?alt=media&token=3f22eb63-259c-4373-b25b-60f1214c0b30">
    <script type="module" src="homepage.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
</head>
<body onload="showTime()">
<div class="container">
    <!-- Carousel -->
    <div class="swiper-container" id="swiper-container">
        <div class="swiper-wrapper" id="swiper-wrapper">
            <!-- Slides will be added here dynamically -->
        </div>
        <!-- Add Pagination -->
        <div class="swiper-pagination"></div>
    </div>

    <!-- Digital Clock -->
    <div id="MyClockDisplay" class="clock"></div>

    <header>
        <div class="nav-container">
            <a href="#" id="donateLink">Donate me!</a>
        </div>
        <div class="header-logo">
            <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo-profile.jpg?alt=media&token=3f22eb63-259c-4373-b25b-60f1214c0b30" alt="KH-Donghua Logo" id="headerLogo">
            <h1>KH-DONGHUA</h1>
        </div>
    </header>
</div>

<main>
    <!-- Search Container -->
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search by video title...">
        <button id="clearBtn">Remove Search</button> <!-- Replace icon with button -->
    </div>

    <div class="welcome-message">Welcome to our KH-DONGHUA</div>

    <div class="filter-bar" id="filterBar">
        <!-- Buttons will be added here dynamically -->
    </div>

    <div class="header-row">
        <h2>Home</h2>
        <button id="sortOrderBtn" class="sort-button">Sort <span id="sortIcon">&#9650;</span></button>
    </div>

    <section class="video-playlist"></section>
</main>

<footer>
    <div class="credit-message">@ta_ma This website built by <span style="font-family: 'Meta Beta', sans-serif;">SEANG SENGLY(Meta Beta)</span></div>
</footer>

<!-- Pop-up for Donate -->
<div class="popup" id="donatePopup">
    <div class="popup-content">
        <button class="close-popup" id="closePopup">&times;</button>
        <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/bakong.jpg?alt=media&token=b7b3de62-76e4-4887-a0af-bc7728eebb32" alt="Donate">
    </div>
</div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const header = document.querySelector('header');
        const swiperContainer = document.querySelector('.swiper-container');
        const clock = document.getElementById('MyClockDisplay');
        const headerLogo = document.getElementById('headerLogo');

        window.addEventListener('scroll', () => {
            if (window.scrollY > swiperContainer.clientHeight) {
                header.classList.add('show');
                swiperContainer.classList.add('hide');
            } else {
                header.classList.remove('show');
                swiperContainer.classList.remove('hide');
            }
        });

        // Scroll to top function
        headerLogo.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    });

    // JavaScript for pop-up functionality
    const donateLink = document.getElementById('donateLink');
    const donatePopup = document.getElementById('donatePopup');
    const closePopup = document.getElementById('closePopup');

    donateLink.addEventListener('click', (event) => {
        event.preventDefault();
        donatePopup.style.display = 'flex';
    });

    closePopup.addEventListener('click', () => {
        donatePopup.style.display = 'none';
    });

    window.addEventListener('click', (event) => {
        if (event.target === donatePopup) {
            donatePopup.style.display = 'none';
        }
    });

    // Initialize Swiper
    const swiper = new Swiper('.swiper-container', {
        loop: true,
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        autoplay: {
            delay: 5000, // 5 seconds delay
            disableOnInteraction: false,
        },
    });

    // Pause autoplay on mouse enter, resume on mouse leave
    const swiperContainerElement = document.getElementById('swiper-container');
    swiperContainerElement.addEventListener('mouseenter', () => {
        swiper.autoplay.stop();
    });

    swiperContainerElement.addEventListener('mouseleave', () => {
        swiper.autoplay.start();
    });

    // Digital Clock
    function showTime(){
        var date = new Date();
        var h = date.getHours(); // 0 - 23
        var m = date.getMinutes(); // 0 - 59
        var s = date.getSeconds(); // 0 - 59
        var session = "AM";

        if(h == 0){
            h = 12;
        }

        if(h > 12){
            h = h - 12;
            session = "PM";
        }

        h = (h < 10) ? "0" + h : h;
        m = (m < 10) ? "0" + m : m;
        s = (s < 10) ? "0" + s : s;

        var time = h + ":" + m + ":" + s + " " + session;

        var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        var currentDate = date.toLocaleDateString("en-US", options);

        document.getElementById("MyClockDisplay").innerHTML = time + " - " + currentDate;

        setTimeout(showTime, 1000);
    }

    showTime();

</script>
</body>
</html>
