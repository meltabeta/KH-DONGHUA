<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KH-DONGHUA Website</title>
    <link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo%2F_1_logo_donghua.png?alt=media&token=c029014a-8ad1-4d2f-a08a-e075791b720e">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
</head>
<body class="dark-mode">
<!-- Navbar  -->
<header>
    <a href="#home" class="logo">
        <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo%2F_1_logo_donghua.png?alt=media&token=c029014a-8ad1-4d2f-a08a-e075791b720e" alt="KH-DONGHUA Logo" class="logo-img">
        KH-DONGHUA
    </a>
    <div class="bx bx-menu" id="menu-icon"></div>
    <!-- menu  -->
    <ul class="navbar">
        <li><a href="#home" class="home-active">Home</a></li>
        <li><a href="#playlists">Playlists</a></li>
        <li><a href="#anime">Anime</a></li>
        <li><a href="#donghua">Donghua</a></li>
        <li><a href="#trailer">Trailer</a></li>
    </ul>

    <div class="header-buttons">
        <a href="#" class="btn fixed-white" id="donateBtn">Donate Me!</a>
        <i class="bx bx-moon bx-sm" id="toggleDarkMode"></i>
    </div>
</header>

<!-- Modal Structure -->
<div id="donateModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/bakong.jpg?alt=media&token=b7b3de62-76e4-4887-a0af-bc7728eebb32" alt="Donate Image" class="donate-modal-img">
        <div class="modal-actions">
            <button id="copyLink">Copy Link</button>
            <a id="downloadImage" href="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/bakong.jpg?alt=media&token=b7b3de62-76e4-4887-a0af-bc7728eebb32" download>Save Image</a>
            <button id="shareImage">Share</button>
        </div>
    </div>
</div>

<!-- Home  -->
<section class="home swiper" id="home">
    <div class="swiper-wrapper">
        <!-- Dynamic content will be inserted here -->
    </div>
    <div class="swiper-pagination"></div>
</section>

<!-- Trailer Section -->
<section class="trailer" id="trailer">
    <h2 class="heading">Trailer</h2>
    <div class="trailer-container" id="trailerContainer">
        <!-- Dynamic content will be inserted here -->
    </div>
</section>

<!-- Existing Sections -->
<div class="movies-section" id="playlists">
    <h2 class="heading">Playlist</h2>
    <!-- Filters -->
    <br>
    <div class="filters">
        <select id="playlist-type-filter">
            <option value="">All Types</option>
        </select>
        <input type="text" id="search-box" placeholder="Search...">
        <button id="reset-filters" class="btn fixed-white" title="Reset Filters">
            <i class='bx bx-reset'></i>
        </button>
    </div>
    <!-- Movies container  -->
    <div class="movies-container">
        <!-- Dynamic content will be inserted here -->
    </div>
    <!-- Pagination controls -->
    <div class="pagination-controls">
        <button id="prev-page" class="btn fixed-white">Previous</button>
        <span id="current-page">1</span> / <span id="total-pages">1</span>
        <button id="next-page" class="btn fixed-white">Next</button>
    </div>
</div>

<!-- Anime -->
<section class="anime" id="anime">
    <h2 class="heading">Anime</h2>
    <div class="anime-container swiper">
        <div class="swiper-wrapper">
            <!-- Dynamic content will be inserted here -->
        </div>
    </div>
</section>

<!-- Donghua -->
<section class="donghua" id="donghua">
    <h2 class="heading">Donghua</h2>
    <div class="donghua-container swiper">
        <div class="swiper-wrapper">
            <!-- Dynamic content will be inserted here -->
        </div>
    </div>
</section>

<!-- footer -->
<section class="footer">
    <a href="#home" class="logo">
        <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo-profile.jpg?alt=media&token=3f22eb63-259c-4373-b25b-60f1214c0b30" alt="KH-DONGHUA Logo" class="logo-img">
        <span class="footer-logo-text">KH-DONGHUA</span>
    </a>
    <div class="social">
        <a href="https://dailymotion.com/donghua_fan_anime" target="_blank">
            <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo%2Fdailymontion_logo.png?alt=media&token=30617ff1-e65d-42d8-95e2-d0f17febd870" alt="Dailymotion">
        </a>
        <a href="https://www.bilibili.tv/en/space/1445782983" target="_blank">
            <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo%2Fbilibili_logo.png?alt=media&token=d54bd336-c996-4bca-a7fd-8e0e44c8fa74" alt="Facebook">
        </a>
        <a href="https://www.youtube.com/channel/UCjrgezqcZ4un50V5jJvLW9A" target="_blank">
            <img src="https://firebasestorage.googleapis.com/v0/b/kh-donghua.appspot.com/o/logo%2Fyoutube_logo.png?alt=media&token=c4131c35-b7c1-4723-b524-2eef397c5ded" alt="Facebook">
        </a>
    </div>
</section>

<!-- Copyright -->
<div class="copyright">
    <p>&#169; SENGLY All Right Reserved</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
<script src="main.js"></script>

<!-- Visibility script included directly in the HTML -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const iframes = document.querySelectorAll('iframe');

        const handleVisibilityChange = (entries, observer) => {
            entries.forEach(entry => {
                const iframe = entry.target;
                const player = iframe.contentWindow;

                if (entry.isIntersecting) {
                    player.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                } else {
                    player.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                }
            });
        };

        const observer = new IntersectionObserver(handleVisibilityChange, {
            threshold: 0.5 // Play when 50% of the iframe is visible
        });

        iframes.forEach(iframe => observer.observe(iframe));
    });
</script>

</body>
</html>
